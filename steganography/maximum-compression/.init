#!/opt/pwn.college/bash

cp /flag /challenge/flag

passwords=($(for i in $(seq -f "%04g" 0 9999 | shuf -n 3);do echo -n $i\ ;done))
input_file="/challenge/flag"

for (( i=0; i<${#passwords[@]}; i++ ))
do
    password=${passwords[$i]}
    zip_name="${input_file}.zip"
    zip -P "$password" "$zip_name" "$input_file"
    mv "$zip_name" "$input_file"
done

mv "${input_file}" /home/hacker/flag.zip
chmod 777 /home/hacker/flag.zip
